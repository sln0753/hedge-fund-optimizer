"""
Demo with Updated Real-World Forecasts
Shows comparison between old assumptions and new professional forecasts
"""

from portfolio_optimizer import DynamicPortfolioOptimizer

def show_forecast_comparison():
    """Display the updated forecasts"""
    
    print("="*80)
    print("–û–ë–ù–û–í–õ–ï–ù–ù–´–ï –ü–†–û–ì–ù–û–ó–´ (Updated Forecasts)")
    print("="*80)
    
    optimizer = DynamicPortfolioOptimizer()
    
    print("\nüìä –°–†–ê–í–ù–ï–ù–ò–ï –°–¢–ê–†–´–• –ò –ù–û–í–´–• –ü–†–û–ì–ù–û–ó–û–í:\n")
    
    print("1Ô∏è‚É£  –ö–õ–Æ–ß–ï–í–ê–Ø –°–¢–ê–í–ö–ê –¶–ë –†–§ (CBR Key Rate):")
    print("-" * 80)
    print("–°—Ç–∞—Ä—ã–π –ø—Ä–æ–≥–Ω–æ–∑ (Old):  [16.0%, 14.0%, 12.0%, 10.0%, 9.0%, 8.5%]")
    print("–ù–û–í–´–ô –ø—Ä–æ–≥–Ω–æ–∑ (NEW):   {}".format(optimizer.cbr_scenarios['base']))
    print("–ò—Å—Ç–æ—á–Ω–∏–∫: –ë–∞–∑–æ–≤—ã–π –ø—Ä–æ–≥–Ω–æ–∑ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–≤")
    print("\nüí° –ò–∑–º–µ–Ω–µ–Ω–∏—è:")
    print("   ‚Ä¢ –¢–µ–∫—É—â–∞—è —Å—Ç–∞–≤–∫–∞: 16.5% (–∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ)")
    print("   ‚Ä¢ 2025: 16.0% (–±–æ–ª–µ–µ –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–≥–Ω–æ–∑)")
    print("   ‚Ä¢ 2026: 12.0% (—É—Å–∫–æ—Ä–µ–Ω–Ω–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ)")
    print("   ‚Ä¢ 2027-2028: 10.0% (—Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è)")
    
    print("\n2Ô∏è‚É£  –ö–£–†–° USD/RUB:")
    print("-" * 80)
    print("–°—Ç–∞—Ä—ã–π –ø—Ä–æ–≥–Ω–æ–∑ (Old):  [90.00, 92.00, 95.00, 98.00, 100.00, 102.00]")
    print("–ù–û–í–´–ô –ø—Ä–æ–≥–Ω–æ–∑ (NEW):   {}".format(optimizer.fx_scenarios['base']))
    print("–ò—Å—Ç–æ—á–Ω–∏–∫: –ë–∞–∑–æ–≤—ã–π –ø—Ä–æ–≥–Ω–æ–∑ –≤–∞–ª—é—Ç–Ω—ã—Ö –∫—É—Ä—Å–æ–≤")
    print("\nüí° –ò–∑–º–µ–Ω–µ–Ω–∏—è:")
    print("   ‚Ä¢ –¢–µ–∫—É—â–∏–π –∫—É—Ä—Å: 81.17 —Ä—É–±/$ (–±–æ–ª–µ–µ —Å–∏–ª—å–Ω—ã–π —Ä—É–±–ª—å)")
    print("   ‚Ä¢ 2025: 83.00 —Ä—É–±/$ (—É–º–µ—Ä–µ–Ω–Ω—ã–π —Ä–æ—Å—Ç)")
    print("   ‚Ä¢ Q2 2026: 92.00 —Ä—É–±/$ (–æ—Å–ª–∞–±–ª–µ–Ω–∏–µ —Ä—É–±–ª—è)")
    print("   ‚Ä¢ –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ: —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è –æ–∫–æ–ª–æ 100 —Ä—É–±/$")
    
    print("\n3Ô∏è‚É£  –í–ö–õ–ê–î –°–ë–ï–† (–ø—Ä–∏–≤—è–∑–∞–Ω –∫ —Å—Ç–∞–≤–∫–µ –¶–ë):")
    print("-" * 80)
    print("–°—Ç–∞—Ä–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å: 15.5% (–¶–ë 16.0% - 0.5%)")
    print("–ù–û–í–ê–Ø –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å:  16.0% (–¶–ë 16.5% - 0.5%)")
    
    print("\n" + "="*80)

def run_updated_recommendations():
    """Run recommendations with updated forecasts"""
    
    print("\n" + "="*80)
    print("–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –° –û–ë–ù–û–í–õ–ï–ù–ù–´–ú–ò –ü–†–û–ì–ù–û–ó–ê–ú–ò")
    print("="*80)
    
    optimizer = DynamicPortfolioOptimizer()
    
    print("\nüìå –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≥–Ω–æ–∑—ã –æ—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–≤:")
    print("   ‚Ä¢ –¶–ë –†–§: —Ç–µ–∫—É—â–∞—è —Å—Ç–∞–≤–∫–∞ 16.5%, —Å–Ω–∏–∂–µ–Ω–∏–µ –¥–æ 10% –∫ 2027-2028")
    print("   ‚Ä¢ USD/RUB: —Ç–µ–∫—É—â–∏–π –∫—É—Ä—Å 81.17, —Ä–æ—Å—Ç –¥–æ 92-100 –∫ 2026-2028")
    print("   ‚Ä¢ –ì–æ—Ä–∏–∑–æ–Ω—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è: 5 –ª–µ—Ç")
    print("   ‚Ä¢ –¶–µ–ª–µ–≤–æ–π –º–µ—Å—è—á–Ω—ã–π –¥–æ—Ö–æ–¥: 50,000 —Ä—É–±")
    
    # Base scenario with updated forecasts
    optimizer.generate_recommendations(
        capital_growth_scenario='constant',
        rate_scenario='base',
        fx_scenario='base'
    )
    
    print("\n" + "="*80)
    print("–ö–õ–Æ–ß–ï–í–´–ï –í–´–í–û–î–´ –° –ù–û–í–´–ú–ò –ü–†–û–ì–ù–û–ó–ê–ú–ò:")
    print("="*80)
    
    # Run simulation to show results
    optimal_weights = optimizer.optimize_portfolio('constant', 'base', 'base')
    simulation = optimizer.simulate_portfolio_performance(
        optimal_weights, 'constant', 'base', 'base'
    )
    
    avg_income = sum([r['monthly_income'] for r in simulation]) / len(simulation)
    final_capital = simulation[-1]['total_capital_end']
    initial_capital = simulation[0]['total_capital_start']
    growth = (final_capital - initial_capital) / initial_capital * 100
    
    print(f"\n‚úÖ –°—Ä–µ–¥–Ω–∏–π –º–µ—Å—è—á–Ω—ã–π –¥–æ—Ö–æ–¥: {avg_income:,.0f} —Ä—É–± ({avg_income/50000*100:.0f}% –æ—Ç —Ü–µ–ª–∏)")
    print(f"‚úÖ –ò—Ç–æ–≥–æ–≤—ã–π –∫–∞–ø–∏—Ç–∞–ª —á–µ—Ä–µ–∑ 5 –ª–µ—Ç: {final_capital:,.0f} —Ä—É–±")
    print(f"‚úÖ –ü—Ä–∏—Ä–æ—Å—Ç –∫–∞–ø–∏—Ç–∞–ª–∞: {growth:+.1f}%")
    print(f"\nüí∞ –ü—Ä–∏ —Ç–µ–∫—É—â–∏—Ö —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–≥–Ω–æ–∑–∞—Ö –ø–æ—Ä—Ç—Ñ–µ–ª—å –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:")
    print(f"   ‚Ä¢ –¶–µ–ª–µ–≤–æ–π –¥–æ—Ö–æ–¥ –≤ {4 if simulation[0]['monthly_income'] < 50000 else 5} –∏–∑ 5 –ª–µ—Ç")
    print(f"   ‚Ä¢ –°—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–æ—Å—Ç –∫–∞–ø–∏—Ç–∞–ª–∞ (+{growth:.0f}%)")
    print(f"   ‚Ä¢ –í–∞–ª—é—Ç–Ω–∞—è –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è (~17% –≤ USD)")
    
    print("\n" + "="*80)
    print("üí° –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø:")
    print("="*80)
    print("–° —É—á–µ—Ç–æ–º —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–≥–Ω–æ–∑–æ–≤ –æ—Ç –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–≤,")
    print("–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –æ—Å—Ç–∞–µ—Ç—Å—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π –∏ —É—Å—Ç–æ–π—á–∏–≤–æ–π.")
    print("–ë–æ–ª–µ–µ –≤—ã—Å–æ–∫–∞—è —Ç–µ–∫—É—â–∞—è —Å—Ç–∞–≤–∫–∞ –¶–ë (16.5%) –∫–æ–º–ø–µ–Ω—Å–∏—Ä—É–µ—Ç")
    print("–±–æ–ª–µ–µ —Å–∏–ª—å–Ω—ã–π —Ç–µ–∫—É—â–∏–π –∫—É—Ä—Å —Ä—É–±–ª—è (81.17 –≤–º–µ—Å—Ç–æ 90.00).")
    print("="*80 + "\n")

def compare_scenarios_updated():
    """Compare scenarios with updated forecasts"""
    
    print("\n" + "="*80)
    print("–°–†–ê–í–ù–ï–ù–ò–ï –°–¶–ï–ù–ê–†–ò–ï–í –° –û–ë–ù–û–í–õ–ï–ù–ù–´–ú–ò –ü–†–û–ì–ù–û–ó–ê–ú–ò")
    print("="*80)
    
    optimizer = DynamicPortfolioOptimizer()
    
    optimizer.compare_scenarios()
    
    print("\n" + "="*80)
    print("–ê–ù–ê–õ–ò–ó –°–¶–ï–ù–ê–†–ò–ï–í:")
    print("="*80)
    print("\nüìä –ë–∞–∑–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π (—Ä–µ–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≥–Ω–æ–∑—ã):")
    print("   ‚Ä¢ –ù–∞–∏–±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω—ã–π –ø—Ä–∏ —Ç–µ–∫—É—â–∏—Ö –º–∞–∫—Ä–æ—ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö")
    print("   ‚Ä¢ –£–º–µ—Ä–µ–Ω–Ω–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ —Å—Ç–∞–≤–∫–∏ –¶–ë —Å 16.5% –¥–æ 10%")
    print("   ‚Ä¢ –û—Å–ª–∞–±–ª–µ–Ω–∏–µ —Ä—É–±–ª—è —Å 81.17 –¥–æ ~100 —Ä—É–±/$")
    print("   ‚Ä¢ –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —É—Å—Ç–æ–π—á–∏–≤—ã–π –¥–æ—Ö–æ–¥ –∏ —Ä–æ—Å—Ç –∫–∞–ø–∏—Ç–∞–ª–∞")
    
    print("\n‚ö†Ô∏è  –ü–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:")
    print("   ‚Ä¢ –ú–µ–¥–ª–µ–Ω–Ω–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ —Å—Ç–∞–≤–∫–∏ (–æ—Å—Ç–∞–µ—Ç—Å—è –≤—ã—Å–æ–∫–æ–π)")
    print("   ‚Ä¢ –°–∏–ª—å–Ω–æ–µ –æ—Å–ª–∞–±–ª–µ–Ω–∏–µ —Ä—É–±–ª—è (–¥–æ 125 —Ä—É–±/$)")
    print("   ‚Ä¢ –ü–∞—Ä–∞–¥–æ–∫—Å–∞–ª—å–Ω–æ –¥–∞–µ—Ç –õ–£–ß–®–ò–ô —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞ —Å—á–µ—Ç –≤—ã—Å–æ–∫–∏—Ö —Å—Ç–∞–≤–æ–∫!")
    
    print("\nüåü –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π:")
    print("   ‚Ä¢ –ë—ã—Å—Ç—Ä–æ–µ —Å–Ω–∏–∂–µ–Ω–∏–µ —Å—Ç–∞–≤–∫–∏ (–¥–æ 7.5%)")
    print("   ‚Ä¢ –£–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Ä—É–±–ª—è (–¥–æ 74 —Ä—É–±/$)")
    print("   ‚Ä¢ –ù–∏–∂–µ –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å, –Ω–æ —Å—Ç–∞–±–∏–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç")
    print("="*80 + "\n")

if __name__ == "__main__":
    # Show what changed
    show_forecast_comparison()
    
    # Run recommendations with updated data
    run_updated_recommendations()
    
    # Compare scenarios
    compare_scenarios_updated()


