# Portfolio Optimizer - Real Forecast Update

**Date**: November 2, 2025  
**Update**: Professional Forecasts Integration ‚úÖ

---

## üìä What Was Updated

The portfolio optimizer has been updated with **real-world professional forecasts** for:
1. Russian Central Bank key rate
2. USD/RUB currency exchange rate

---

## üîÑ Changes Made

### 1. Central Bank Key Rate (–ö–ª—é—á–µ–≤–∞—è —Å—Ç–∞–≤–∫–∞ –¶–ë –†–§)

**OLD Forecast (Assumptions):**
```
[16.0%, 14.0%, 12.0%, 10.0%, 9.0%, 8.5%]
```

**NEW Forecast (Professional):**
```
[16.5%, 16.0%, 12.0%, 10.0%, 10.0%, 10.0%]
```

**Source:** Base scenario from professional financial analysts

**Key Changes:**
- ‚úÖ Current rate updated to **16.5%** (actual)
- ‚úÖ 2025: **16.0%** (more conservative - rates staying higher)
- ‚úÖ 2026: **12.0%** (accelerated decline)
- ‚úÖ 2027-2028: **10.0%** (stabilization at double digits)

**Insight:** The new forecast shows rates will remain elevated longer in 2025, then decline more sharply in 2026.

---

### 2. USD/RUB Exchange Rate

**OLD Forecast (Assumptions):**
```
[90.00, 92.00, 95.00, 98.00, 100.00, 102.00]
```

**NEW Forecast (Professional):**
```
[81.17, 83.00, 92.00, 95.00, 98.00, 100.00]
```

**Source:** Base scenario from currency forecast table

**Key Changes:**
- ‚úÖ Current rate: **81.17 —Ä—É–±/$** (stronger ruble than assumed)
- ‚úÖ 2025: **83.00 —Ä—É–±/$** (moderate weakening)
- ‚úÖ Q2 2026: **92.00 —Ä—É–±/$** (sharper decline)
- ‚úÖ Long-term: **~100 —Ä—É–±/$** (similar end point)

**Insight:** Ruble is currently stronger than previously assumed (~10% difference), but expected to weaken more sharply in 2026.

---

### 3. Sberbank Deposit Yield (linked to CBR)

**OLD:** 15.5% (CBR 16.0% - 0.5%)  
**NEW:** 16.0% (CBR 16.5% - 0.5%)

Updated to reflect current CBR rate.

---

## üìà Impact on Portfolio Performance

### With Real Forecasts (Base Scenario):

| Metric | Value | Comparison to Old |
|--------|-------|-------------------|
| **Average Monthly Income** | 69,970 —Ä—É–± | ‚Üë Higher (140% of target vs 130%) |
| **Final Capital (5 years)** | 9,009,881 —Ä—É–± | ‚Üë Higher (+87.2% vs +79.7%) |
| **Average Yield** | 13.4% | ‚Üë Slightly higher |
| **Income Coverage** | 140% | ‚úÖ Improved |
| **Strategy Status** | SUSTAINABLE ‚úÖ | Same |

**Conclusion:** The real forecasts actually produce **BETTER** results than the old assumptions!

### Why Better Performance?

1. **Higher CBR Rate in Year 1:** 16.5% vs 16.0% means higher yields initially
2. **Stronger Ruble Currently:** Lower starting point (81.17 vs 90.00) means more room for currency gains
3. **Optimal Tax Positioning:** Higher deposit yields (tax-free OFZ bonds become more attractive)

---

## üéØ Optimal Allocation with Real Forecasts

### Ruble Instruments (85.0%):
- **–û–§–ó-25083**: 18.5% (889,084 —Ä—É–±) - Tax-free bond
- **–û–§–ó-26231**: 18.1% (868,756 —Ä—É–±) - Tax-free bond
- **–í–∫–ª–∞–¥ –°–±–µ—Ä –¶–ë-0.5%**: 17.1% (823,702 —Ä—É–±) - CBR-linked deposit
- **–°—Ç—Ä—É–∫—Ç—É—Ä–Ω–∞—è –æ–±–ª–∏–≥–∞—Ü–∏—è**: 16.5% (795,635 —Ä—É–±) - Structured bond
- **–§–æ–Ω–¥ –†–æ—Å–û–±–ª–∏–≥–∞—Ü–∏–π**: 14.8% (713,107 —Ä—É–±) - Bond ETF

### USD Instruments (15.0%):
- **–°–±–µ—Ä-–µ–≤—Ä–æ–æ–±–ª-2025**: 7.5% ($4,418) - Eurobond
- **–î–µ–ø–æ–∑–∏—Ç –°–±–µ—Ä USD**: 5.2% ($3,055) - USD deposit
- **USD CASH**: 2.4% ($1,415) - Currency position

**Changes from Old Allocation:**
- Slightly more weight in ruble instruments (85% vs 84%)
- Tax-free OFZ bonds increased (better tax efficiency at higher rates)
- USD allocation reduced slightly (stronger starting ruble position)

---

## üîÆ 5-Year Forecast with Real Data

| Year | Capital (—Ä—É–±) | Monthly Income (—Ä—É–±) | Coverage | Status |
|------|---------------|---------------------|----------|--------|
| 1 | 5,403,782 | 49,340 | 99% | ‚ö†Ô∏è Near target |
| 2 | 6,082,962 | 56,598 | 113% | ‚úÖ Exceeds |
| 3 | 6,912,390 | 69,119 | 138% | ‚úÖ Exceeds |
| 4 | 7,872,627 | 80,020 | 160% | ‚úÖ Exceeds |
| 5 | 9,009,881 | 94,771 | 190% | ‚úÖ Exceeds |

**Average Coverage:** 140% of 50,000 —Ä—É–± target  
**Capital Growth:** +87.2% over 5 years

---

## üìã Scenario Comparison with Real Forecasts

| Scenario | Avg Yield | Avg Monthly Income | Final Capital | Coverage |
|----------|-----------|-------------------|---------------|----------|
| **–ë–∞–∑–∞ (Real Forecasts)** | 13.4% | 69,970 —Ä—É–± | 9,009,881 —Ä—É–± | 140% |
| –°–Ω–∏–∂–µ–Ω–∏–µ –∫–∞–ø–∏—Ç–∞–ª–∞ 5% | 13.4% | 63,092 —Ä—É–± | 7,190,602 —Ä—É–± | 126% |
| –†–æ—Å—Ç –∫–∞–ø–∏—Ç–∞–ª–∞ 5% | 13.4% | 77,535 —Ä—É–± | 11,180,037 —Ä—É–± | 155% |
| **–ü–µ—Å—Å–∏–º–∏—Å—Ç–∏—á–Ω—ã–π** | 15.5% | 84,263 —Ä—É–± | 9,867,498 —Ä—É–± | 169% ‚≠ê |
| –û–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–π | 11.3% | 56,590 —Ä—É–± | 8,207,086 —Ä—É–± | 113% |

**Key Insight:** Pessimistic scenario (high rates, weak ruble) paradoxically gives the BEST returns due to sustained high interest rates on deposits and bonds!

---

## üöÄ How to Use Updated Optimizer

### 1. Interactive Mode
```bash
cd /Users/sergeynosov/AI_projects/Hedge_Fund
python portfolio_optimizer.py
```

### 2. Demo with Real Forecasts
```bash
python updated_forecast_demo.py
```

### 3. Standard Tests
```bash
python test_optimizer.py
```

---

## üìù Files Modified

1. **`portfolio_optimizer.py`**
   - Updated `self.current_usd_rub` from 90.0 to **81.17**
   - Updated `self.cbr_scenarios['base']` with real forecast
   - Updated `self.fx_scenarios['base']` with real forecast
   - Updated Sberbank deposit yield from 15.5% to **16.0%**
   - Added source comments

2. **`updated_forecast_demo.py`** (NEW)
   - Shows comparison between old and new forecasts
   - Demonstrates impact on portfolio performance
   - Analyzes scenario differences

3. **`UPDATE_SUMMARY.md`** (NEW - this file)
   - Documents all changes
   - Explains impact on performance
   - Provides usage instructions

---

## ‚úÖ Validation Results

All tests pass with real forecasts:
- ‚úÖ Optimization converges successfully
- ‚úÖ Weights sum to 100%
- ‚úÖ 5-year simulation runs correctly
- ‚úÖ All scenarios produce valid results
- ‚úÖ Performance metrics improved

---

## üí° Key Takeaways

1. **Real forecasts are MORE optimistic** than original assumptions
   - Higher initial rates (16.5% vs 16.0%)
   - Stronger current ruble (81.17 vs 90.00)
   - Better overall returns (+87% vs +80%)

2. **Portfolio remains sustainable** across all scenarios
   - Minimum coverage: 113% in optimistic scenario
   - Maximum coverage: 169% in pessimistic scenario
   - Base case: 140% coverage

3. **Tax-free instruments more valuable** at higher rates
   - OFZ bonds get larger allocations
   - Maximize after-tax returns
   - Sberbank deposit remains competitive due to CBR link

4. **Currency diversification optimal at ~15-17%**
   - Lower than before due to stronger starting ruble
   - Still provides important hedge
   - Eurobonds and USD deposits balanced

---

## ‚ö†Ô∏è Important Notes

- Forecasts are from professional analysts but **not guaranteed**
- Update forecasts quarterly as new data becomes available
- Monitor actual CBR decisions vs forecast
- Track USD/RUB rate changes
- Rebalance portfolio if major deviations occur

---

## üéì Professional Forecast Sources

The forecasts used are from:
- **CBR Key Rate**: Base scenario from financial analysts
  - Current: 16.5%
  - 2025 avg: 19.2% / Dec 2025: 16.0%
  - 2026 avg: 14.3% / Dec 2026: 12.0%
  - 2027-2028: 10.0%

- **USD/RUB Rate**: Base scenario from currency forecasts
  - 1 week: 81.17
  - 1 month: 83.00
  - 2025: 83.00
  - Q1 2026: 88.00
  - Q2 2026: 92.00

These are institutional-grade forecasts providing a solid foundation for portfolio optimization.

---

## üìû Next Steps

1. ‚úÖ **Update complete** - Optimizer uses real forecasts
2. üìä **Review recommendations** - Run `updated_forecast_demo.py`
3. üíº **Consider implementation** - Evaluate suggested allocations
4. üîÑ **Schedule updates** - Refresh forecasts quarterly
5. üìà **Monitor performance** - Track against projections

---

*Updated with professional forecasts on November 2, 2025*  
*Ready for production use with real-world data ‚úÖ*


